@import 'tailwindcss';
@import './mapControls.css';
@import './sidePanel.css';

/* Global styles to ensure full page coverage */
html,
body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

/* Allow scrolling on itinerary pages */
body.itinerary-page {
  overflow: auto;
  height: auto;
}

/* Itinerary detail page specific styles */
.itinerary-detail-page {
  overflow: hidden;
}

.itinerary-detail-page .leaflet-container {
  height: 100vh !important;
  width: 100vw !important;
}

/* Ensure Leaflet controls are visible on itinerary detail page */
.itinerary-detail-page .leaflet-control-zoom,
.itinerary-detail-page .leaflet-control-attribution,
.itinerary-detail-page .leaflet-bar.leaflet-control {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  position: relative !important;
  z-index: 10000 !important;
}

.itinerary-detail-page .leaflet-control-zoom a,
.itinerary-detail-page .leaflet-control-attribution a {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* Ensure Leaflet controls are visible on desktop */
.leaflet-control-zoom,
.leaflet-bar.leaflet-control {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 10000 !important;
}

.leaflet-control-attribution {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  z-index: 10000 !important;
}

/* Ensure controls are visible on all screen sizes */
@media (min-width: 769px) {
  .leaflet-control-zoom {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
  }

  .leaflet-control-attribution {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: relative !important;
  }
}

/* Force controls to be visible */
.leaflet-control-zoom,
.leaflet-control-attribution {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  position: relative !important;
  z-index: 10000 !important;
}

.leaflet-control-zoom a,
.leaflet-control-attribution a {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
}

/* Override any CSS that might hide controls on desktop */
@media (min-width: 769px) {
  .leaflet-control-zoom,
  .leaflet-control-attribution,
  .leaflet-bar.leaflet-control,
  .leaflet-control-zoom a,
  .leaflet-control-attribution a,
  .leaflet-bar.leaflet-control a {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    position: relative !important;
    z-index: 10000 !important;
  }
}

/* Ensure controls are not hidden by any parent elements */
.leaflet-control-zoom,
.leaflet-control-attribution,
.leaflet-bar.leaflet-control {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  position: relative !important;
  z-index: 10000 !important;
  transform: none !important;
  clip: auto !important;
  clip-path: none !important;
}

/* Style for recenter button */
.leaflet-control-zoom-in[title='Recenter to itinerary'] {
  background: white !important;
  color: #374151 !important;
  border: none !important;
  font-weight: 600 !important;
  transition: all 0.2s ease !important;
  border-radius: 0 !important;
}

.leaflet-control-zoom-in[title='Recenter to itinerary']:hover {
  background: #f3f4f6 !important;
  color: #1f2937 !important;
}

#__next {
  height: 100vh;
  width: 100vw;
  margin: 0;
  padding: 0;
}

/* Ensure the map container takes full viewport */
.leaflet-container {
  height: 100vh !important;
  width: 100vw !important;
  margin: 0 !important;
  padding: 0 !important;
  background-color: #f8f9fa !important;
  overflow: hidden !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Ensure map tiles stretch to fill the container */
.leaflet-tile-pane {
  background-color: #f8f9fa !important;
  width: 100% !important;
  height: 100% !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Force the map to always fill the container */
.leaflet-map-pane {
  background-color: #f8f9fa !important;
  width: 100% !important;
  height: 100% !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Ensure individual tiles stretch properly */
.leaflet-tile {
  background-color: #f8f9fa !important;
  width: 256px !important;
  height: 256px !important;
}

.leaflet-pane {
  background-color: #f8f9fa !important;
}

.leaflet-tile-pane {
  background-color: #f8f9fa !important;
}

.leaflet-overlay-pane {
  background-color: #f8f9fa !important;
}

/* Force tiles to stretch */
.leaflet-tile {
  background-color: #f8f9fa !important;
}

/* Remove any default margins/padding from map elements */
.leaflet-map-pane,
.leaflet-tile-pane,
.leaflet-overlay-pane,
.leaflet-marker-pane,
.leaflet-shadow-pane,
.leaflet-tooltip-pane,
.leaflet-popup-pane {
  background-color: #f8f9fa !important;
}

/* Map container responsive styles */
.map-container {
  margin-left: 320px; /* Space for side panel on desktop */
  transition: margin-left 0.3s ease;
}

/* When side panel is closed, remove margin */
body.side-panel-closed .map-container {
  margin-left: 0;
}

@media (max-width: 768px) {
  .map-container {
    margin-left: 0; /* No margin on mobile */
  }
}
